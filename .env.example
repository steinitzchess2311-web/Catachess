# CataChess Environment Configuration

# ===== Basic =====
ENV=dev
DEBUG=true

# ===== Engine (Legacy Single-Spot Mode) =====
ENGINE_URL=http://192.168.40.33:8001
ENGINE_TIMEOUT=60

# ===== Multi-Spot Engine (NEW) =====
# Enable multi-spot mode with automatic failover
ENABLE_MULTI_SPOT=false

# Option 1: Define spots via environment variable (JSON array)
# ENGINE_SPOTS='[{"id":"cn-shanghai","url":"http://192.168.40.33:8001","priority":100},{"id":"cn-local","url":"http://192.168.40.41:5000","priority":90}]'

# Option 2: Use backend/spots.json file (recommended for multiple spots)
# Just set ENABLE_MULTI_SPOT=true and create backend/spots.json

# Multi-spot timeout and retry settings
SPOT_REQUEST_TIMEOUT=30
SPOT_MAX_RETRIES=2

# ===== Database =====
DATABASE_URL=postgresql://user:password@host:port/database

# ===== Security =====
JWT_SECRET_KEY=your-secret-key-change-in-production
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# ===== Storage =====
# DATA_ROOT=data

# ===== Example: Enable Multi-Spot Mode =====
#
# To enable multi-spot mode:
# 1. Set ENABLE_MULTI_SPOT=true
# 2. Either:
#    a) Set ENGINE_SPOTS with JSON array (see above), OR
#    b) Create backend/spots.json with your spot configurations
#
# Example spots.json:
# {
#   "spots": [
#     {
#       "id": "cn-shanghai",
#       "url": "http://192.168.40.33:8001",
#       "region": "cn-east",
#       "priority": 100,
#       "enabled": true
#     },
#     {
#       "id": "cn-local",
#       "url": "http://192.168.40.41:5000",
#       "region": "cn-local",
#       "priority": 90,
#       "enabled": true
#     }
#   ]
# }
#
# The system will automatically:
# - Route requests to the best available spot
# - Failover to backup spots on timeout/error
# - Track metrics (latency, success rate) per spot
# - Retry failed requests up to SPOT_MAX_RETRIES times
