# Stage 3C - 性能与容量评估（产品级门槛）

## 约束（必须写在每个 stage 文档开头）
- [ ] 每完成一项任务，必须勾选对应 checkbox。
- [ ] 如果遇到阻塞或不确定，必须直接写明问题，不允许猜测后勾选。
- [ ] 禁止“先勾选后补做”。
- [ ] 禁止谎报进度；我会抽查对比代码。

---

## 本 Stage 目标（产品级）
确保 PGN v2 在真实负载下可用，避免导入/渲染/分析导致系统卡死。

---

## 分计划（Checklist）

### A. 导入性能
- [ ] 使用大 PGN（>10MB, >500 章）导入测试
- [ ] 记录耗时与内存
- [ ] 若超阈值：调整拆分/异步处理

### B. 渲染性能
- [ ] 前端渲染复杂变例（5+ 层）
- [ ] 确认 UI 不冻结（滚动/点击流畅）
- [ ] 必要时做虚拟渲染或分段加载

### C. Tagger/Engine 负载
- [ ] 使用 fen_index 做批量 tagger 分析
- [ ] 记录 CPU/内存
- [ ] 必要时加入限流/队列

### D. 性能门槛
- [ ] 导入单章 PGN < 2s（目标）
- [ ] 前端渲染 < 300ms（目标）
- [ ] Tagger 每 100 节点 < 5s（目标）

---

## 输出物（本阶段交付）
- 性能测试报告
- 性能优化清单
- 明确上线门槛

